---
import { getCollection } from 'astro:content'
import Header from '../../components/Header.astro'
import Footer from '../../components/Footer.astro'
import BaseHead from '../../components/BaseHead.astro'

const allPosts = await getCollection('blog')
const tags: string[] = [
  ...new Set(allPosts.map((post) => post.data.tags).flat()),
]
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <BaseHead
      title="Tagovi"
      description="Radi lakšeg pronalska sadržaja tekstovi su označeni tagovima."
    />
    <style>
      ul {
        list-style-type: none;
        padding: unset;
      }
      ul li {
        display: flex;
      }
      ul li :global(time) {
        flex: 0 0 130px;
        font-style: italic;
        color: #595959;
      }
      ul li a:visited {
        color: #8e32dc;
      }
    </style>
  </head>
  <body>
    <Header />
    <main>
      <p>
        Svi tekstovi su označeni tagovima radi lakšeg pronalaženja traženog
        sadržaja.
      </p>
      <p>Tagovi:</p>
      <ul class="flex gap-2">
        {
          tags
            .sort((a, b) => a.localeCompare(b))
            .map((tag) => (
              <li>
                <a href={`/tags/${tag}`}>{tag}</a>
              </li>
            ))
        }
      </ul>
      <Footer />
    </main>
  </body>
</html>
